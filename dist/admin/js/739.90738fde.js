"use strict";(self["webpackChunkjoinstu_admin_vue"]=self["webpackChunkjoinstu_admin_vue"]||[]).push([[739],{8739:function(t,e,s){s.r(e),s.d(e,{default:function(){return R}});var n=s(3396),l=s(7139);const a={class:"container mw-100",style:{"padding-right":"0px","padding-left":"0px",margin:"0","margin-right":"0px"}},o={class:"row",style:{margin:"0"}},i={class:"col-md-12"},c={class:"card"},r=(0,n._)("div",{class:"card-body"},[(0,n._)("h5",{class:"text-uppercase card-title mb-0"},"用戶管理")],-1),d={class:"table-responsive"},u={class:"table no-wrap user-table mb-0"},b=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"#",-1),m={class:"text-uppercase border-0 font-medium",scope:"col"},p={class:"text-uppercase border-0 font-medium",scope:"col"},_=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"Email",-1),h=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"學校",-1),g={class:"text-uppercase border-0 font-medium",scope:"col"},x=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"身分",-1),k=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"管理",-1),w={class:"font-medium mb-0"},f={class:"font-medium mb-0"},U={class:"text-muted"},v=(0,n._)("br",null,null,-1),y={class:"text-muted"},D={class:"text-muted"},C=(0,n._)("br",null,null,-1),z={class:"text-muted"},S=(0,n._)("br",null,null,-1),j={style:{padding:"0"}},E={class:"container d-flex justify-content-around"},H=(0,n._)("i",{class:"bi bi-pencil-square"},null,-1),I=["onClick"],q=(0,n._)("i",{class:"bi bi-x-circle"},null,-1),A=[q],B=["onClick"],K=(0,n._)("i",{class:"bi bi-x-circle"},null,-1),L=[K],W=["onClick"],Y=(0,n._)("i",{class:"bi bi-trash"},null,-1),Z=[Y],F=["onClick"],G=(0,n._)("i",{class:"bi bi-magic"},null,-1),J=[G];function M(t,e,s,q,K,Y){const G=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("div",c,[r,(0,n._)("div",d,[(0,n._)("table",u,[(0,n._)("thead",null,[(0,n._)("tr",null,[b,(0,n._)("th",m,[(0,n._)("a",{onClick:e[0]||(e[0]=t=>Y.sort("name"))},"姓名")]),(0,n._)("th",p,[(0,n._)("a",{onClick:e[1]||(e[1]=t=>Y.sort("id"))},"ID")]),_,h,(0,n._)("th",g,[(0,n._)("a",{onClick:e[2]||(e[2]=t=>Y.sort("joindate"))},"加入日期")]),x,k])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(K.accountsData,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,[(0,n._)("span",w,(0,l.zw)(e+1),1)]),(0,n._)("td",null,[(0,n._)("h5",f,(0,l.zw)(t.name),1)]),(0,n._)("td",null,[(0,n._)("span",U,(0,l.zw)(t.id),1),v]),(0,n._)("td",null,[(0,n._)("span",y,(0,l.zw)(t.email),1)]),(0,n._)("td",null,[(0,n._)("span",D,(0,l.zw)(t.school),1),C]),(0,n._)("td",null,[(0,n._)("span",z,(0,l.zw)(new Date(t.joindate).toLocaleDateString()),1),S]),(0,n._)("td",null,[(0,n._)("span",null,(0,l.zw)(1==t.isAdmin?"管理員":"學生"),1)]),(0,n._)("td",j,[(0,n._)("div",E,[(0,n.Wm)(G,{class:"col btn btn-secondary mx-1 btn_edit",type:"button",title:"edit",to:{name:"accountsEditing",params:{id:t.id}}},{default:(0,n.w5)((()=>[H])),_:2},1032,["to"]),0==t.isBanned?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"col btn btn-secondary mx-1 btn_ban",type:"button",title:"ban",onClick:e=>Y.banUser(t.id)},A,8,I)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"col btn btn-danger mx-1 btn_ban",type:"button",title:"active",onClick:e=>Y.unbanUser(t.id)},L,8,B)),0==t.isDeleted?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"col btn btn-secondary mx-1 btn_delete",type:"button",title:"delete",onClick:e=>Y.deleteUser(t.id)},Z,8,W)):((0,n.wg)(),(0,n.iD)("button",{key:3,class:"col btn btn-danger mx-1 btn_delete",type:"button",title:"active",onClick:e=>Y.restoreUser(t.id)},J,8,F))])])])))),128))])])])])])])])}var N=s(9314);name;var O={name:"accountHome",data(){return{sortStatus:!1,accountsData:void 0}},methods:{sort(t){this.accountsData.sort(((e,s)=>(this.sortStatus=-1*this.sortStatus,e[t].localeCompare(s[t])))),this.sortStatus&&this.accountsData.reverse(),this.sortStatus=!this.sortStatus},getUsers(){N.h.get("admin/getUsers",{},(t=>{this.accountsData=t.data}),(t=>{console.log(t)}))},banUser(t){N.h.post("admin/banUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))},unbanUser(t){N.h.post("admin/unbanUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))},deleteUser(t){N.h.post("admin/deleteUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))},restoreUser(t){N.h.post("admin/restoreUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))}},created(){this.getUsers(),setInterval((()=>{this.getUsers()}),1e4)}},P=s(89);const Q=(0,P.Z)(O,[["render",M]]);var R=Q}}]);
//# sourceMappingURL=739.90738fde.js.map