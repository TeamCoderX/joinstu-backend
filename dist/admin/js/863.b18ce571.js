"use strict";(self["webpackChunkjoinstu_admin_vue"]=self["webpackChunkjoinstu_admin_vue"]||[]).push([[863],{863:function(t,e,s){s.r(e),s.d(e,{default:function(){return P}});var n=s(3396),l=s(7139);const a={class:"container mw-100",style:{"padding-right":"0px","padding-left":"0px",margin:"0","margin-right":"0px"}},o={class:"row",style:{margin:"0"}},i={class:"col-md-12"},c={class:"card"},r=(0,n._)("div",{class:"card-body"},[(0,n._)("h5",{class:"text-uppercase card-title mb-0"},"用戶管理")],-1),d={class:"table-responsive"},u={class:"table no-wrap user-table mb-0"},b=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"#",-1),m={class:"text-uppercase border-0 font-medium",scope:"col"},_={class:"text-uppercase border-0 font-medium",scope:"col"},p={class:"text-uppercase border-0 font-medium",scope:"col"},h={class:"text-uppercase border-0 font-medium",scope:"col"},g={class:"text-uppercase border-0 font-medium",scope:"col"},k=(0,n._)("th",{class:"text-uppercase border-0 font-medium",scope:"col"},"管理",-1),x={class:"font-medium mb-0"},w={class:"font-medium mb-0"},U={class:"text-muted"},f=(0,n._)("br",null,null,-1),v={class:"text-muted"},y=(0,n._)("br",null,null,-1),C={class:"text-muted"},D=(0,n._)("br",null,null,-1),S={style:{padding:"0"}},z={class:"container d-flex justify-content-around"},j=(0,n._)("i",{class:"bi bi-pencil-square"},null,-1),A=["onClick"],H=(0,n._)("i",{class:"bi bi-x-circle"},null,-1),I=[H],q=["onClick"],B=(0,n._)("i",{class:"bi bi-x-circle"},null,-1),E=[B],K=["onClick"],L=(0,n._)("i",{class:"bi bi-trash"},null,-1),W=[L],Y=["onClick"],Z=(0,n._)("i",{class:"bi bi-magic"},null,-1),F=[Z];function G(t,e,s,H,B,L){const Z=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("div",c,[r,(0,n._)("div",d,[(0,n._)("table",u,[(0,n._)("thead",null,[(0,n._)("tr",null,[b,(0,n._)("th",m,[(0,n._)("a",{onClick:e[0]||(e[0]=t=>L.sort("name"))},"姓名")]),(0,n._)("th",_,[(0,n._)("a",{onClick:e[1]||(e[1]=t=>L.sort("id"))},"ID")]),(0,n._)("th",p,[(0,n._)("a",{onClick:e[2]||(e[2]=t=>L.sort("school"))},"學校")]),(0,n._)("th",h,[(0,n._)("a",{onClick:e[3]||(e[3]=t=>L.sort("joindate"))},"加入日期")]),(0,n._)("th",g,[(0,n._)("a",{onClick:e[4]||(e[4]=t=>L.sort("isAdmin"))},"身分")]),k])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(B.accountsData,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,[(0,n._)("span",x,(0,l.zw)(e+1),1)]),(0,n._)("td",null,[(0,n._)("h5",w,(0,l.zw)(t.name),1)]),(0,n._)("td",null,[(0,n._)("span",U,(0,l.zw)(t.id),1),f]),(0,n._)("td",null,[(0,n._)("span",v,(0,l.zw)(t.school),1),y]),(0,n._)("td",null,[(0,n._)("span",C,(0,l.zw)(new Date(t.joindate).toLocaleDateString()),1),D]),(0,n._)("td",null,[(0,n._)("span",null,(0,l.zw)(1==t.isAdmin?"管理員":"學生"),1)]),(0,n._)("td",S,[(0,n._)("div",z,[(0,n.Wm)(Z,{class:"col btn btn-secondary mx-1 btn_edit",type:"button",title:"edit",to:{name:"accountsEditing",params:{id:t.id}}},{default:(0,n.w5)((()=>[j])),_:2},1032,["to"]),0==t.isBanned?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"col btn btn-secondary mx-1 btn_ban",type:"button",title:"ban",onClick:e=>L.banUser(t.id)},I,8,A)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"col btn btn-danger mx-1 btn_ban",type:"button",title:"active",onClick:e=>L.unbanUser(t.id)},E,8,q)),0==t.isDeleted?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"col btn btn-secondary mx-1 btn_delete",type:"button",title:"delete",onClick:e=>L.deleteUser(t.id)},W,8,K)):((0,n.wg)(),(0,n.iD)("button",{key:3,class:"col btn btn-danger mx-1 btn_delete",type:"button",title:"active",onClick:e=>L.restoreUser(t.id)},F,8,Y))])])])))),128))])])])])])])])}var J=s(9314);name;var M={name:"accountHome",data(){return{sortStatus:!1,accountsData:void 0}},methods:{sort(t){this.accountsData.sort(((e,s)=>(this.sortStatus=-1*this.sortStatus,e[t].localeCompare(s[t])))),this.sortStatus&&this.accountsData.reverse(),this.sortStatus=!this.sortStatus},getUsers(){J.h.get("admin/getUsers",{},(t=>{this.accountsData=t.data}),(t=>{console.log(t)}))},banUser(t){J.h.post("admin/banUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))},unbanUser(t){J.h.post("admin/unbanUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))},deleteUser(t){J.h.post("admin/deleteUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))},restoreUser(t){J.h.post("admin/restoreUser",{id:t},(()=>{this.getUsers()}),(t=>{console.log(t)}))}},created(){this.getUsers(),setInterval((()=>{this.getUsers()}),1e4)}},N=s(89);const O=(0,N.Z)(M,[["render",G]]);var P=O}}]);
//# sourceMappingURL=863.b18ce571.js.map