"use strict";(self["webpackChunkjoinstu_index_vue"]=self["webpackChunkjoinstu_index_vue"]||[]).push([[429],{8429:function(t,s,e){e.r(s),e.d(s,{default:function(){return f}});var o=e(3396),a=e(9242);const n={class:"card mb-0"},r={class:"card-body p-sm-5"},d=(0,o._)("h2",{class:"text-center mb-4"},"發起議案",-1),i={id:"form_proposeAdd",action:""},l={class:"mb-3"},u=(0,o._)("div",{class:"mb-3"},null,-1),p={class:"mb-3"},c=(0,o._)("p",null,[(0,o.Uk)("發起的議案需與您校內事務有關，並透過此平臺讓更多同學看見，促成進一步的討論與共識，並透過「附議」來讓校方更能聽到學生們的立場。"),(0,o._)("br"),(0,o._)("span",{style:{color:"rgb(220, 53, 69)"}},"警語：發起後將可以被所有本校的學生看到。請勿在議案中進行人身攻擊、散佈謠言或明暗示歧視、色情等令人感到不適之題材，也不可違反相關法律，違者下架議案，情節嚴重者以封鎖帳號處分。")],-1),b={key:0},m={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},_={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},h={key:2,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},w=(0,o._)("div",{class:"spinner-grow",role:"status"},null,-1),y=[w];function A(t,s,e,w,A,g){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",n,[(0,o._)("div",r,[d,(0,o._)("form",i,[(0,o._)("div",l,[(0,o.wy)((0,o._)("input",{class:"form-control",type:"text",id:"inp_title",name:"title",placeholder:"標題",required:"","onUpdate:modelValue":s[0]||(s[0]=t=>A.title=t)},null,512),[[a.nr,A.title]])]),(0,o.wy)((0,o._)("textarea",{class:"form-control",id:"inp_details",name:"details",placeholder:"簡介",required:"","onUpdate:modelValue":s[1]||(s[1]=t=>A.details=t)},null,512),[[a.nr,A.details]]),u,(0,o._)("div",p,[(0,o.wy)((0,o._)("textarea",{class:"form-control",id:"inp_purpose",name:"purpose",rows:"6",placeholder:"目的",required:"","onUpdate:modelValue":s[2]||(s[2]=t=>A.purpose=t)},null,512),[[a.nr,A.purpose]])]),c,(0,o._)("div",null,[1==A.status.personAccess?((0,o.wg)(),(0,o.iD)("div",b,[0==A.status.sendingFourmData?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-primary d-block w-100",type:"button",onClick:s[3]||(s[3]=t=>g.sendAddData())},"發起議案")):((0,o.wg)(),(0,o.iD)("button",m,"發起議案"))])):0==A.status.personAccess?((0,o.wg)(),(0,o.iD)("button",_,"管理員不可參與")):((0,o.wg)(),(0,o.iD)("button",h,y))])])])])])}e(7658);var g=e(9314),v={name:"proposeAdd",data(){return{status:{sendingFourmData:!1,personAccess:void 0},title:"",details:"",purpose:""}},methods:{sendAddData(){this.sendAddData=!0,g.h.post("propose/new",{title:this.title,details:this.details,purpose:this.purpose},(t=>{1==t.data.status?setTimeout((()=>{this.$router.push({name:"proposeList"})}),100):console.error(t.data)}),(t=>{403==t.response.status?this.emitter.emit("callLoginShow"):401==t.response.status?alert("管理員不可參與！"):console.error(t)})),this.sendAddData=!1}},created(){g.h.post("accounts/status",{},(t=>{0==t.data.status?this.emitter.emit("preLoginWindow","proposeList"):1==t.data.isAdmin?this.status.personAccess=!1:this.status.personAccess=!0}),(t=>{console.error(t)})),setInterval((()=>{this.sendAddData||(console.log("a",this.sendAddData),localStorage.setItem("joinstu_AddPropose_title",this.title),localStorage.setItem("joinstu_AddPropose_details",this.details),localStorage.setItem("joinstu_AddPropose_purpose",this.purpose))}),1e3)}},k=e(89);const D=(0,k.Z)(v,[["render",A]]);var f=D}}]);
//# sourceMappingURL=429.0d6c0a70.js.map