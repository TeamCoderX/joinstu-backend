"use strict";(self["webpackChunkjoinstu_index_vue"]=self["webpackChunkjoinstu_index_vue"]||[]).push([[290],{6290:function(s,t,o){o.r(t),o.d(t,{default:function(){return v}});var a=o(3396),e=o(9242);const n={class:"card mb-0"},r={class:"card-body p-sm-5"},d=(0,a._)("h2",{class:"text-center mb-4"},"修改密碼",-1),i={id:"form_proposeAdd",action:""},l={class:"mb-3"},c={class:"mb-3"},u={class:"mb-3"},w={key:0},p={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},b={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},m=(0,a._)("div",{class:"spinner-grow",role:"status"},null,-1),h=[m];function g(s,t,o,m,g,f){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",n,[(0,a._)("div",r,[d,(0,a._)("form",i,[(0,a._)("div",l,[(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",placeholder:"原始密碼",required:"","onUpdate:modelValue":t[0]||(t[0]=s=>g.originPassword=s)},null,512),[[e.nr,g.originPassword]])]),(0,a._)("div",c,[(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",placeholder:"新密碼",required:"","onUpdate:modelValue":t[1]||(t[1]=s=>g.newPassword=s)},null,512),[[e.nr,g.newPassword]])]),(0,a._)("div",u,[(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",placeholder:"確認新密碼",required:"","onUpdate:modelValue":t[2]||(t[2]=s=>g.confirmPassword=s)},null,512),[[e.nr,g.confirmPassword]])]),(0,a._)("div",null,[1==g.status.access?((0,a.wg)(),(0,a.iD)("div",w,[0==g.status.sendingData?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary d-block w-100",type:"button",onClick:t[3]||(t[3]=s=>f.sendData())},"送出修改")):((0,a.wg)(),(0,a.iD)("button",p,"送出修改"))])):((0,a.wg)(),(0,a.iD)("button",b,h))])])])])])}var f=o(9314),y={name:"proposeAdd",data(){return{status:{sendingData:!1,access:void 0},originPassword:"",newPassword:"",confirmPassword:""}},methods:{sendData(){this.newPassword!=this.confirmPassword?alert("新密碼與確認新密碼不相符"):(this.sendingata=!0,f.h.post("profile/changepassword",{originPassword:this.originPassword,newPassword:this.newPassword},(s=>{1==s.data.status?(alert("密碼已更改，請重新登入"),window.location.href="/api/accounts/logout"):alert("密碼更改失敗")}),(s=>{403==s.response.status?this.emitter.emit("callLoginShow"):console.error(s)})),this.sendingData=!1)}},created(){f.h.post("accounts/status",{},(s=>{0==s.data.status?this.emitter.emit("preLoginWindow","profileChangePassword"):this.status.access=!0}),(s=>{console.error(s)}))}},_=o(89);const P=(0,_.Z)(y,[["render",g]]);var v=P}}]);
//# sourceMappingURL=290.b3ea75c0.js.map