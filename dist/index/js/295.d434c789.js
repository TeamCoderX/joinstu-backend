"use strict";(self["webpackChunkjoinstu_index_vue"]=self["webpackChunkjoinstu_index_vue"]||[]).push([[295],{3295:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var a=s(3396),o=s(9242);const n={class:"card mb-0"},r={class:"card-body p-sm-5"},d=(0,a._)("h2",{class:"text-center mb-4"},"發起議案",-1),i={id:"form_proposeAdd",action:""},l={class:"mb-3"},u=(0,a._)("div",{class:"mb-3"},null,-1),p={class:"mb-3"},c=(0,a._)("p",null,[(0,a.Uk)("發起的議案需與您校內事務有關，並透過此平臺讓更多同學看見，促成進一步的討論與共識，並透過「附議」來讓校方更能聽到學生們的立場。"),(0,a._)("br"),(0,a._)("span",{style:{color:"rgb(220, 53, 69)"}},"警語：發起後將可以被所有本校的學生看到。請勿在議案中進行人身攻擊、散佈謠言或明暗示歧視、色情等令人感到不適之題材，也不可違反相關法律，違者下架議案，情節嚴重者以封鎖帳號處分。")],-1),b={key:0},m={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},h={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},_={key:2,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},w=(0,a._)("div",{class:"spinner-grow",role:"status"},null,-1),y=[w];function v(t,e,s,w,v,k){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",n,[(0,a._)("div",r,[d,(0,a._)("form",i,[(0,a._)("div",l,[(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"inp_title",name:"title",placeholder:"標題",required:"","onUpdate:modelValue":e[0]||(e[0]=t=>v.title=t)},null,512),[[o.nr,v.title]])]),(0,a.wy)((0,a._)("textarea",{class:"form-control",id:"inp_details",name:"details",placeholder:"簡介",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>v.details=t)},null,512),[[o.nr,v.details]]),u,(0,a._)("div",p,[(0,a.wy)((0,a._)("textarea",{class:"form-control",id:"inp_purpose",name:"purpose",rows:"6",placeholder:"目的",required:"","onUpdate:modelValue":e[2]||(e[2]=t=>v.purpose=t)},null,512),[[o.nr,v.purpose]])]),c,(0,a._)("div",null,[1==v.status.personAccess?((0,a.wg)(),(0,a.iD)("div",b,[0==v.status.sendingFourmData?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary d-block w-100",type:"button",onClick:e[3]||(e[3]=t=>k.sendAddData())},"發起議案")):((0,a.wg)(),(0,a.iD)("button",m,"發起議案"))])):0==v.status.personAccess?((0,a.wg)(),(0,a.iD)("button",h,"管理員不可參與")):((0,a.wg)(),(0,a.iD)("button",_,y))])])])])])}s(7658);var k=s(9314),A={name:"proposeAdd",data(){return{status:{sendingFourmData:!1,personAccess:void 0},title:"",details:"",purpose:""}},methods:{sendAddData(){this.sendAddData=!0,k.h.post("propose/new",{title:this.title,details:this.details,purpose:this.purpose},(t=>{1==t.data.status?setTimeout((()=>{this.$router.push({name:"proposeList"})}),100):"data-empty"==t.data.reason?alert("欄位不得空白"):console.error(t.data)}),(t=>{403==t.response.status?this.emitter.emit("callLoginShow"):401==t.response.status?alert("管理員不可參與！"):console.error(t)})),this.sendAddData=!1}},created(){k.h.post("accounts/status",{},(t=>{0==t.data.status?this.emitter.emit("preLoginWindow","proposeList"):1==t.data.isAdmin?this.status.personAccess=!1:this.status.personAccess=!0}),(t=>{console.error(t)})),setInterval((()=>{this.sendAddData}),1e3)}},D=s(89);const g=(0,D.Z)(A,[["render",v]]);var f=g}}]);
//# sourceMappingURL=295.d434c789.js.map