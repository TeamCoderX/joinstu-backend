"use strict";(self["webpackChunkjoinstu_index_vue"]=self["webpackChunkjoinstu_index_vue"]||[]).push([[799],{6799:function(t,s,e){e.r(s),e.d(s,{default:function(){return E}});var i=e(3396),o=e(7139);const l={key:0,style:{display:"flex",margin:"5px"}},a={class:"text-center border rounded-0 shadow-sm profile-box",style:{width:"14em",height:"30em","background-color":"#ffffff","margin-right":"5px"}},r={key:0},d=(0,i._)("div",{style:{height:"50px",background:"rgba(54,162,177,0)"}},null,-1),n=(0,i._)("div",null,[(0,i._)("i",{class:"bi bi-person-circle",style:{"font-size":"3em"}})],-1),p={style:{height:"80px"}},u={style:{"margin-bottom":"0px"}},c={style:{"font-size":"1em","margin-bottom":"16px"}},h={style:{"font-size":"1em"}},g={style:{"margin-top":"3em"}},m={style:{color:"var(--bs-blue)","font-size":"1.5em"}},f={style:{color:"var(--bs-blue)","font-size":"1.5em"}},_={style:{color:"var(--bs-blue)","font-size":"1.5em"}},v={key:1},y=(0,i._)("div",{class:"spinner-border text-primary",style:{height:"2em","margin-left":"calc(50vw - 2em)"},role:"status"},null,-1),w=[y],b={style:{padding:"5px",width:"100%"}},k=(0,i._)("h2",null,"動態",-1),x={style:{"margin-bottom":"1em"}},z=(0,i._)("h3",null,"最近附議",-1),D={key:0},P=(0,i._)("div",{class:"card",style:{display:"flex",margin:"-4px","margin-bottom":"1em"}},[(0,i._)("div",{class:"card-body"},[(0,i._)("h4",{class:"card-title"}," 無附議紀錄 ")])],-1),U=[P],T={key:1},j={class:"card-title"},F=(0,i._)("i",{class:"bi bi-phone-landscape"},null,-1),W=(0,i._)("h3",null,"最近發起議案",-1),q={key:0},C=(0,i._)("div",{class:"card",style:{display:"flex",margin:"-4px","margin-bottom":"1em"}},[(0,i._)("div",{class:"card-body"},[(0,i._)("h4",{class:"card-title"}," 無發起紀錄 ")])],-1),H=[C],I={key:1},K={class:"card-title"},L=(0,i._)("i",{class:"bi bi-plus-square"},null,-1);function S(t,s,e,y,P,C){const S=(0,i.up)("router-link");return 0==P.status.updating?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",a,[void 0!=P.profile&&void 0!=P.data.school&&void 0!=P.data.id?((0,i.wg)(),(0,i.iD)("div",r,[d,n,(0,i._)("div",p,[(0,i._)("h3",u,(0,o.zw)(P.profile.name),1),(0,i._)("p",c,(0,o.zw)(P.data.id),1),(0,i._)("p",h,(0,o.zw)(P.data.school),1)]),(0,i._)("div",g,[(0,i._)("p",null,[(0,i.Uk)("於"),(0,i._)("span",null,(0,o.zw)(new Date(P.profile.joindate).toLocaleDateString()),1),(0,i.Uk)("加入")]),(0,i._)("p",null,[(0,i.Uk)("附議了"),(0,i._)("span",m,(0,o.zw)(P.profile.supportedProposes.length),1),(0,i.Uk)("次")]),(0,i._)("p",null,[(0,i.Uk)("發起了"),(0,i._)("span",f,(0,o.zw)(P.profile.addedProposes.length),1),(0,i.Uk)("個提案")]),(0,i._)("p",null,[(0,i.Uk)("發了"),(0,i._)("span",_,(0,o.zw)(P.profile.addedForums.length),1),(0,i.Uk)("篇文")])])])):((0,i.wg)(),(0,i.iD)("div",v,w))]),(0,i._)("div",b,[k,(0,i._)("div",x,[z,0==P.recent.support.length?((0,i.wg)(),(0,i.iD)("div",D,U)):((0,i.wg)(),(0,i.iD)("div",T,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(P.recent.support,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.url,class:"card",style:{display:"flex",margin:"-4px","margin-bottom":"1em"}},[(0,i.Wm)(S,{class:"card-body",to:{name:"proposeDetails",params:{id:t.url}}},{default:(0,i.w5)((()=>[(0,i._)("h4",j,[F,(0,i.Uk)(" 附議："),(0,i._)("span",null,(0,o.zw)(t.title),1)])])),_:2},1032,["to"])])))),128))]))]),(0,i._)("div",null,[W,0==P.recent.support.length?((0,i.wg)(),(0,i.iD)("div",q,H)):((0,i.wg)(),(0,i.iD)("div",I,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(P.recent.propose,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.url,class:"card",style:{display:"flex","margin-bottom":"1em"}},[(0,i.Wm)(S,{class:"card-body",to:{name:"proposeDetails",params:{id:t.url}}},{default:(0,i.w5)((()=>[(0,i._)("h4",K,[L,(0,i.Uk)(" 提案："),(0,i._)("span",null,(0,o.zw)(t.title),1)])])),_:2},1032,["to"])])))),128))]))])])])):(0,i.kq)("",!0)}e(7658);var Y=e(9314),A={name:"profileIndex",data(){return{recent:{support:[],propose:[]},profile:void 0,status:{access:void 0},data:{id:void 0,school:void 0}}},methods:{getProfile(){Y.h.get("profile/index",{},(t=>{this.profile=t.data,this.getFirstTitles(),Y.h.post("data/getSchool",{id:this.profile.school},(t=>{this.data.school=t.data.name,this.status.updating=!0,this.status.updating=!1}),(t=>{console.log(t)}))}),(t=>{console.log(t)})),Y.h.post("accounts/status",{},(t=>{t.data.isAdmin?(this.data.id="管理員",alert("管理員請至後臺!!"),window.location.href="/"):this.data.id="學生",this.status.updating=!0,this.status.updating=!1}),(t=>{console.log(t)}))},getFirstTitles(){0!=this.profile.supportedProposes.length&&Y.h.post("data/getTitle/propose",{id:this.profile.supportedProposes[0]},(t=>{this.recent.support.push({title:t.data.title,url:this.profile.supportedProposes[0]}),this.status.updating=!0,this.status.updating=!1}),(t=>{console.log(t)})),0!=this.profile.addedProposes.length&&Y.h.post("data/getTitle/propose",{id:this.profile.addedProposes[0]},(t=>{this.recent.propose.push({title:t.data.title,url:this.profile.supportedProposes[0]}),this.status.updating=!0,this.status.updating=!1}),(t=>{console.log(t)}))}},created(){Y.h.post("accounts/status",{},(t=>{0==t.data.status?this.emitter.emit("preLoginWindow","profileIndex"):(this.status.access=!0,this.getProfile(),this.status.updating=!0,this.status.updating=!1)}),(t=>{console.error(t)}))}},Z=e(89);const B=(0,Z.Z)(A,[["render",S]]);var E=B}}]);
//# sourceMappingURL=799.70445d87.js.map