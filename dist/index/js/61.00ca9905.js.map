{"version":3,"file":"js/61.00ca9905.js","mappings":"8MACSA,MAAM,a,GACFA,MAAM,oB,GACPC,EAAAA,EAAAA,GAAsC,MAAlCD,MAAM,oBAAmB,QAAI,G,GAC3BE,GAAG,gBAAgBC,OAAO,I,GACvBH,MAAM,Q,GAMXC,EAAAA,EAAAA,GAAI,mB,mBAKmBD,MAAM,gCAAgCI,KAAK,SAASC,SAAA,I,SAEtBL,MAAM,kCAAkCI,KAAK,SAC1FC,SAAA,I,SACWL,MAAM,kCAAkCI,KAAK,SAASC,SAAA,I,GACjEJ,EAAAA,EAAAA,GAA8C,OAAzCD,MAAM,eAAeM,KAAK,U,YAA/BC,G,0CApBpBC,EAAAA,EAAAA,IAyBM,MAzBNC,EAyBM,EAxBFR,EAAAA,EAAAA,GAuBM,MAvBNS,EAuBM,CAtBFC,GACAV,EAAAA,EAAAA,GAoBO,OApBPW,EAoBO,EAnBHX,EAAAA,EAAAA,GAGM,MAHNY,EAGM,WAFFZ,EAAAA,EAAAA,GACoB,SADbD,MAAM,eAAeI,KAAK,OAAOF,GAAG,YAAYY,KAAK,QAAQC,YAAY,KAAKC,SAAA,G,qCACxEC,EAAAC,MAAKC,I,iBAALF,EAAAC,YAAK,SAEtBjB,EAAAA,EAAAA,GACkC,YADxBD,MAAM,eAAeE,GAAG,cAAcY,KAAK,WAAWC,YAAY,KAAKC,SAAA,G,qCACpEC,EAAAG,SAAQD,I,iBAARF,EAAAG,YACbC,GACApB,EAAAA,EAAAA,GAWM,YAVgC,GAAvBgB,EAAAK,OAAOC,eAAY,WAA9Bf,EAAAA,EAAAA,IAIM,MAAAgB,EAAA,CAHkC,GAAtBP,EAAAK,OAAOG,cAAW,WAAhCjB,EAAAA,EAAAA,IACwC,U,MADGR,MAAM,gCAAgCI,KAAK,SACjFsB,QAAKC,EAAA,KAAAA,EAAA,GAAAR,GAAES,EAAAH,gBAAe,WAAI,WAC/BjB,EAAAA,EAAAA,IAAyF,SAAzFqB,EAA4E,YAEtC,GAAvBZ,EAAAK,OAAOC,eAAY,WAAtCf,EAAAA,EAAAA,IAC6B,SAD7BsB,EACa,cAAO,WACpBtB,EAAAA,EAAAA,IAES,SAFTuB,EAESC,W,uBAS7B,GACIlB,KAAM,WACNmB,OACI,MAAO,CACHX,OAAQ,CACJG,aAAa,EACbF,kBAAcW,GAElBhB,MAAO,GACPE,SAAU,GAElB,EACAe,QAAS,CACLV,cACIW,KAAKd,OAAOG,aAAc,EAC1BY,EAAAA,EAAAA,KAAU,YAAa,CACnBnB,MAAOkB,KAAKlB,MACZE,SAAUgB,KAAKhB,WAEbkB,IACyB,GAAnBA,EAAIL,KAAKX,OACTiB,YAAW,KACPH,KAAKI,QAAQC,KAAK,CAAE3B,KAAM,aAAc,GACzC,KAEoB,cAAnBwB,EAAIL,KAAKS,OACTC,MAAM,UAENC,QAAQC,MAAMP,EAAIL,KAE1B,IAEFa,IAC6B,KAAvBA,EAAIC,SAASzB,OACbc,KAAKY,QAAQC,KAAK,iBACY,KAAvBH,EAAIC,SAASzB,OACpBqB,MAAM,YAENC,QAAQC,MAAMC,EAClB,IAERV,KAAKd,OAAOG,aAAc,CAC9B,GAEJyB,UACIb,EAAAA,EAAAA,KAAU,kBAAmB,CAAC,GACzBC,IAC0B,GAAnBA,EAAIL,KAAKX,OACTc,KAAKY,QAAQC,KAAK,iBAAkB,aAEZ,GAApBX,EAAIL,KAAKkB,QACTf,KAAKd,OAAOC,cAAe,EAE3Ba,KAAKd,OAAOC,cAAe,CAEnC,IAEHuB,IACGF,QAAQC,MAAMC,EAAI,GAS9B,G,QC7FJ,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://joinstu-index-vue/./src/views/forum/add.vue","webpack://joinstu-index-vue/./src/views/forum/add.vue?27b0"],"sourcesContent":["<template>\n    <div class=\"card mb-0\">\n        <div class=\"card-body p-sm-5\">\n            <h2 class=\"text-center mb-4\">建立討論</h2>\n            <form id=\"form_forumAdd\" action=\"\">\n                <div class=\"mb-3\">\n                    <input class=\"form-control\" type=\"text\" id=\"inp_title\" name=\"title\" placeholder=\"標題\" required\n                        v-model=\"title\">\n                </div>\n                <textarea class=\"form-control\" id=\"inp_details\" name=\"contents\" placeholder=\"內容\" required\n                    v-model=\"contents\"></textarea>\n                <br>\n                <div>\n                    <div v-if=\"status.personAccess == true\">\n                        <button v-if=\"status.sendAddData == false\" class=\"btn btn-primary d-block w-100\" type=\"button\"\n                            @click=\"sendAddData()\">建立討論</button>\n                        <button v-else class=\"btn btn-primary d-block w-100\" type=\"button\" disabled>建立討論</button>\n                    </div>\n                    <button v-else-if=\"status.personAccess == false\" class=\"btn btn-secondary d-block w-100\" type=\"button\"\n                        disabled>管理員不可參與</button>\n                    <button v-else class=\"btn btn-secondary d-block w-100\" type=\"button\" disabled>\n                        <div class=\"spinner-grow\" role=\"status\"></div>\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { ajax } from '@/lib/util'\nexport default {\n    name: 'forumAdd',\n    data() {\n        return {\n            status: {\n                sendAddData: false,\n                personAccess: undefined,\n            },\n            title: \"\",\n            contents: \"\",\n        }\n    },\n    methods: {\n        sendAddData() {\n            this.status.sendAddData = true;\n            ajax.post('forum/new', {\n                title: this.title,\n                contents: this.contents,\n            },\n                ((res) => {\n                    if (res.data.status == true) {\n                        setTimeout(() => {\n                            this.$router.push({ name: 'forumList' });\n                        }, 100);\n                    } else {\n                        if (res.data.reason == 'data-empty') {\n                            alert('欄位不得空白')\n                        } else {\n                            console.error(res.data);\n                        }\n                    }\n                }),\n                ((err) => {\n                    if (err.response.status == 403) {\n                        this.emitter.emit('callLoginShow')\n                    } else if (err.response.status == 401) {\n                        alert('管理員不可參與！')\n                    } else {\n                        console.error(err)\n                    }\n                }))\n            this.status.sendAddData = false;\n        }\n    },\n    created() {\n        ajax.post('accounts/status', {},\n            (res) => {\n                if (res.data.status == false) {\n                    this.emitter.emit('preLoginWindow', 'forumList');\n                } else {\n                    if (res.data.isAdmin == true) {\n                        this.status.personAccess = false;\n                    } else {\n                        this.status.personAccess = true;\n                    }\n                }\n            },\n            (err) => {\n                console.error(err)\n            })\n        // setInterval(()=>{\n        //     if(this.status.sendAddData == false) {\n        //         console.log(1)\n        //         localStorage.setItem('joinstu_AddForum_title', this.title)\n        //         localStorage.setItem('joinstu_AddForum_contents', this.contents)\n        //     }\n        // },1000)\n    },\n}\n</script>","import { render } from \"./add.vue?vue&type=template&id=e267ceca\"\nimport script from \"./add.vue?vue&type=script&lang=js\"\nexport * from \"./add.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/joinstu-index-vue/joinstu-index-vue/joinstu-index-vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","action","type","disabled","role","_hoisted_11","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","name","placeholder","required","$data","title","$event","contents","_hoisted_6","status","personAccess","_hoisted_7","sendAddData","onClick","_cache","$options","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","data","undefined","methods","this","ajax","res","setTimeout","$router","push","reason","alert","console","error","err","response","emitter","emit","created","isAdmin","__exports__","render"],"sourceRoot":""}