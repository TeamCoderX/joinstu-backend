"use strict";(self["webpackChunkjoinstu_index_vue"]=self["webpackChunkjoinstu_index_vue"]||[]).push([[61],{4061:function(t,s,e){e.r(s),e.d(s,{default:function(){return v}});var n=e(3396),a=e(9242);const o={class:"card mb-0"},d={class:"card-body p-sm-5"},r=(0,n._)("h2",{class:"text-center mb-4"},"建立討論",-1),i={id:"form_forumAdd",action:""},l={class:"mb-3"},c=(0,n._)("br",null,null,-1),u={key:0},p={key:1,class:"btn btn-primary d-block w-100",type:"button",disabled:""},b={key:1,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},m={key:2,class:"btn btn-secondary d-block w-100",type:"button",disabled:""},h=(0,n._)("div",{class:"spinner-grow",role:"status"},null,-1),w=[h];function y(t,s,e,h,y,_){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",d,[r,(0,n._)("form",i,[(0,n._)("div",l,[(0,n.wy)((0,n._)("input",{class:"form-control",type:"text",id:"inp_title",name:"title",placeholder:"標題",required:"","onUpdate:modelValue":s[0]||(s[0]=t=>y.title=t)},null,512),[[a.nr,y.title]])]),(0,n.wy)((0,n._)("textarea",{class:"form-control",id:"inp_details",name:"contents",placeholder:"內容",required:"","onUpdate:modelValue":s[1]||(s[1]=t=>y.contents=t)},null,512),[[a.nr,y.contents]]),c,(0,n._)("div",null,[1==y.status.personAccess?((0,n.wg)(),(0,n.iD)("div",u,[0==y.status.sendAddData?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary d-block w-100",type:"button",onClick:s[2]||(s[2]=t=>_.sendAddData())},"建立討論")):((0,n.wg)(),(0,n.iD)("button",p,"建立討論"))])):0==y.status.personAccess?((0,n.wg)(),(0,n.iD)("button",b,"管理員不可參與")):((0,n.wg)(),(0,n.iD)("button",m,w))])])])])}e(7658);var _=e(9314),f={name:"forumAdd",data(){return{status:{sendAddData:!1,personAccess:void 0},title:"",contents:""}},methods:{sendAddData(){this.status.sendAddData=!0,_.h.post("forum/new",{title:this.title,contents:this.contents},(t=>{1==t.data.status?setTimeout((()=>{this.$router.push({name:"forumList"})}),100):"data-empty"==t.data.reason?alert("欄位不得空白"):console.error(t.data)}),(t=>{403==t.response.status?this.emitter.emit("callLoginShow"):401==t.response.status?alert("管理員不可參與！"):console.error(t)})),this.status.sendAddData=!1}},created(){_.h.post("accounts/status",{},(t=>{0==t.data.status?this.emitter.emit("preLoginWindow","forumList"):1==t.data.isAdmin?this.status.personAccess=!1:this.status.personAccess=!0}),(t=>{console.error(t)}))}},k=e(89);const A=(0,k.Z)(f,[["render",y]]);var v=A}}]);
//# sourceMappingURL=61.229ff7af.js.map