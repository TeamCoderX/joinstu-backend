"use strict";(self["webpackChunkjoinstu_index_vue"]=self["webpackChunkjoinstu_index_vue"]||[]).push([[888],{4564:function(t,e,s){s.d(e,{Z:function(){return tt}});var a=s(3396),i=s(9242),o=s(7139);const r={class:"card",style:{"border-radius":"0px","border-width":"0px","border-top-width":"2px"}},n={class:"card-body",style:{"min-height":"30vh","max-height":"55vh"}},l={key:0},m=(0,a._)("div",{class:"spinner-border text-primary",style:{height:"2em","margin-left":"calc(50vw - 2em)"},role:"status"},null,-1),d=[m],u={key:1},c={style:{"margin-top":"1em","margin-bottom":"1em"}},p=(0,a._)("i",{class:"bi bi-chat-left",style:{"margin-right":"0.5em"}},null,-1),g={key:0,class:"btn-group",role:"group",style:{height:"2em"}},h={key:1,class:"btn-group",role:"group",style:{height:"2em"}},v=(0,a._)("button",{class:"btn btn-secondary",type:"button",disabled:"",style:{"margin-right":"1em","margin-bottom":"0px","margin-left":"1em","padding-top":"3px","padding-bottom":"3px","border-radius":"6px"}},"留言支持意見",-1),b=(0,a._)("button",{class:"btn btn-secondary",type:"button",disabled:"",style:{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"3px","padding-bottom":"3px","border-radius":"6px"}},"留言其他意見",-1),y=[v,b],_={key:2},x=(0,a._)("div",{class:"alert alert-primary",role:"alert"},[(0,a._)("i",{class:"bi bi-exclamation-triangle",style:{"margin-right":"1em"}}),(0,a._)("strong",null,"請先登入再留言")],-1),w=[x],f={key:3},D=(0,a._)("div",{class:"spinner-border text-white",role:"status"},null,-1),k=[D],C={key:4,class:"container pb-2"},$={class:"row"},z={class:"col-md-6"},L=(0,a._)("h4",null,"支持意見",-1),S={class:"list-group overflow-auto",style:{"max-height":"40vh"}},U={class:"d-flex media"},P={class:"media-body"},q={class:"d-flex media",style:{overflow:"visible"}},Z={style:{overflow:"visible"},class:"media-body"},H={class:"row"},Y={class:"col-md-12"},j=(0,a._)("br",null,null,-1),E={class:"text-muted"},K={class:"col-md-6"},V=(0,a._)("h4",null,"其他意見",-1),W={class:"list-group overflow-auto",style:{"max-height":"40vh"}},A={class:"d-flex media"},B={class:"media-body"},F={class:"d-flex media",style:{overflow:"visible"}},G={style:{overflow:"visible"},class:"media-body"},I={class:"row"},J={class:"col-md-12"},M=(0,a._)("br",null,null,-1),N={class:"text-muted"};function O(t,e,s,m,v,b){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",n,[void 0==v.isLogin?((0,a.wg)(),(0,a.iD)("div",l,d)):1==v.isLogin?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",c,[p,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"留言...",style:{height:"2em",width:"25em"},required:"","onUpdate:modelValue":e[0]||(e[0]=t=>v.comment=t)},null,512),[[i.nr,v.comment]]),0==v.status.sendingComment?((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>b.supportComment&&b.supportComment(...t)),class:"btn btn-primary",type:"button",style:{"margin-right":"1em","margin-bottom":"0px","margin-left":"1em","padding-top":"3px","padding-bottom":"3px","border-radius":"6px"}},"留言支持意見"),(0,a._)("button",{onClick:e[2]||(e[2]=(...t)=>b.elseComment&&b.elseComment(...t)),class:"btn btn-primary",type:"button",style:{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"3px","padding-bottom":"3px","border-radius":"6px"}},"留言其他意見")])):((0,a.wg)(),(0,a.iD)("div",h,y))])])):0==v.isLogin?((0,a.wg)(),(0,a.iD)("div",_,w)):(0,a.kq)("",!0),void 0==v.commentData?((0,a.wg)(),(0,a.iD)("div",f,k)):((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",$,[(0,a._)("div",z,[L,(0,a._)("ul",S,[v.status.commentUpdate?(0,a.kq)("",!0):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(v.commentData.support,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",style:{"margin-bottom":"6px"},key:t.id},[(0,a._)("div",U,[(0,a._)("div",P,[(0,a._)("div",q,[(0,a._)("div",Z,[(0,a._)("div",H,[(0,a._)("div",Y,[(0,a._)("p",null,[(0,a._)("strong",null,(0,o.zw)(t.author),1),(0,a.Uk)(" "+(0,o.zw)(t.contents)+" ",1),j,(0,a._)("small",E,(0,o.zw)(new Date(t.date).toLocaleString()),1)])])])])])])])])))),128))])]),(0,a._)("div",K,[V,(0,a._)("ul",W,[v.status.updating?(0,a.kq)("",!0):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(v.commentData.else,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",style:{"margin-bottom":"6px"},key:t.id},[(0,a._)("div",A,[(0,a._)("div",B,[(0,a._)("div",F,[(0,a._)("div",G,[(0,a._)("div",I,[(0,a._)("div",J,[(0,a._)("p",null,[(0,a._)("strong",null,(0,o.zw)(t.author),1),(0,a.Uk)(" "+(0,o.zw)(t.contents)+" ",1),M,(0,a._)("small",N,(0,o.zw)(new Date(t.date).toLocaleString()),1)])])])])])])])])))),128))])])])]))])])}var Q=s(9314),R={name:"commentsSec",props:["urlPrefix"],data(){return{commentData:void 0,comment:"",isLogin:void 0,status:{updating:!1,sendingComment:!1}}},methods:{getComments(){let t=null;Q.h.get(`${this.urlPrefix}/comments/${this.$route.params.id}`,{},(e=>{t=e.data;for(let s in t.support)Q.h.post("data/getUser",{id:t.support[s].author},(e=>{t.support[s].author=e.data.name,this.commentData=t,this.status.updating=!0,this.status.updating=!1}),(t=>{console.error(t)}));for(let s in t.else)Q.h.post("data/getUser",{id:t.else[s].author},(e=>{t.else[s].author=e.data.name,this.commentData=t,this.status.updating=!0,this.status.updating=!1}),(t=>{console.error(t)}))}),(t=>{console.error(t)}))},supportComment(){this.status.sendingComment=!0,Q.h.post(`${this.urlPrefix}/commentSupport/${this.$route.params.id}`,{contents:this.comment},(()=>{this.getComments()}),(t=>{403==t.response.status?this.emitter.emit("callLoginShow"):401==t.response.status?alert("管理員不可參與！"):console.error(t)})),this.comment="",this.status.sendingComment=!1},elseComment(){this.status.sendingComment=!0,Q.h.post(`${this.urlPrefix}/commentElse/${this.$route.params.id}`,{contents:this.comment},(()=>{this.getComments()}),(t=>{401==t.response.status?alert("管理員不可參與！"):console.error(t)})),this.comment="",this.status.sendingComment=!1}},created(){this.getComments(),Q.h.post("accounts/status",{},(t=>{0==t.data.status?this.isLogin=!1:this.isLogin=!0}),(t=>{console.error(t)}))}},T=s(89);const X=(0,T.Z)(R,[["render",O]]);var tt=X},9888:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var a=s(3396),i=s(7139);const o={key:0},r=(0,a._)("div",{class:"spinner-border text-primary",style:{height:"2em","margin-left":"calc(50vw - 2em)"},role:"status"},null,-1),n=[r],l={key:1},m={style:{padding:"1em"}},d={style:{color:"var(--bs-gray-700)"}},u={style:{color:"var(--bs-gray-700)"}};function c(t,e,s,r,c,p){const g=(0,a.up)("commentSec");return(0,a.wg)(),(0,a.iD)(a.HY,null,[void 0==c.cardData?((0,a.wg)(),(0,a.iD)("div",o,n)):((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",m,[(0,a._)("h3",null,(0,i.zw)(c.cardData.title),1),(0,a._)("h6",d,[(0,a.Uk)("作者："),(0,a._)("span",null,(0,i.zw)(c.cardData.author),1)]),(0,a._)("h6",u,[(0,a._)("span",null,(0,i.zw)(new Date(c.cardData.date).toLocaleString()),1)]),(0,a._)("span",null,(0,i.zw)(c.cardData.contents),1)])])),(0,a.Wm)(g,{urlPrefix:"forum"})],64)}s(7658);var p=s(9314),g=s(4564),h={components:{commentSec:g.Z},name:"proposeDetails",data(){return{cardData:void 0,status:{updating:!1}}},methods:{getDetails(){p.h.get(`forum/details/${this.$route.params.id}`,{},(t=>{if(null!=t.data){let e=t.data;p.h.post("data/getUser",{id:e.author},(t=>{e.author=t.data.name,this.cardData=e,this.$route.meta.title=e.title,document.title=this.$route.meta.title}),(t=>{console.error(t)}))}else this.$router.push({name:"Error404"})}),(t=>{console.error(t)}))}},created(){this.getDetails()}},v=s(89);const b=(0,v.Z)(h,[["render",c]]);var y=b}}]);
//# sourceMappingURL=888.93fee9cf.js.map