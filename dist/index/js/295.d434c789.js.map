{"version":3,"file":"js/295.d434c789.js","mappings":"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","sources":["webpack://joinstu-index-vue/./src/views/propose/add.vue","webpack://joinstu-index-vue/./src/views/propose/add.vue?c788"],"sourcesContent":["<template>\n    <div>\n        <div class=\"card mb-0\">\n            <div class=\"card-body p-sm-5\">\n                <h2 class=\"text-center mb-4\">發起議案</h2>\n                <form id=\"form_proposeAdd\" action=\"\">\n                    <div class=\"mb-3\">\n                        <input class=\"form-control\" type=\"text\" id=\"inp_title\" name=\"title\" placeholder=\"標題\" required\n                            v-model=\"title\">\n                    </div>\n                    <textarea class=\"form-control\" id=\"inp_details\" name=\"details\" placeholder=\"簡介\" required\n                        v-model=\"details\"></textarea>\n                    <div class=\"mb-3\"></div>\n                    <div class=\"mb-3\"><textarea class=\"form-control\" id=\"inp_purpose\" name=\"purpose\" rows=\"6\"\n                            placeholder=\"目的\" required v-model=\"purpose\"></textarea></div>\n                    <p>發起的議案需與您校內事務有關，並透過此平臺讓更多同學看見，促成進一步的討論與共識，並透過「附議」來讓校方更能聽到學生們的立場。<br><span\n                            style=\"color: rgb(220, 53, 69);\">警語：發起後將可以被所有本校的學生看到。請勿在議案中進行人身攻擊、散佈謠言或明暗示歧視、色情等令人感到不適之題材，也不可違反相關法律，違者下架議案，情節嚴重者以封鎖帳號處分。</span>\n                    </p>\n                    <div>\n                        <div v-if=\"status.personAccess == true\">\n                            <button v-if=\"status.sendingFourmData == false\" class=\"btn btn-primary d-block w-100\"\n                                type=\"button\" @click=\"sendAddData()\">發起議案</button>\n                            <button v-else class=\"btn btn-secondary d-block w-100\" type=\"button\" disabled>發起議案</button>\n                        </div>\n                        <button v-else-if=\"status.personAccess == false\" class=\"btn btn-secondary d-block w-100\" type=\"button\"\n                            disabled>管理員不可參與</button>\n                        <button v-else class=\"btn btn-secondary d-block w-100\" type=\"button\" disabled>\n                            <div class=\"spinner-grow\" role=\"status\"></div>\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { ajax } from '@/lib/util'\nexport default {\n    name: 'proposeAdd',\n    data() {\n        return {\n            status: {\n                sendingFourmData: false,\n                personAccess: undefined,\n            },\n            title: \"\",\n            details: \"\",\n            purpose: \"\",\n        }\n    },\n    methods: {\n        sendAddData() {\n            this.sendAddData = true;\n            ajax.post('propose/new', {\n                title: this.title,\n                details: this.details,\n                purpose: this.purpose\n            },\n                ((res) => {\n                    if (res.data.status == true) {\n                        setTimeout(() => {\n                            this.$router.push({ name: 'proposeList' });\n                        }, 100)\n                    } else {\n                        if(res.data.reason == 'data-empty'){\n                            alert('欄位不得空白')\n                        }else{\n                            console.error(res.data);\n                        }\n                    }\n                }),\n                ((err) => {\n                    if (err.response.status == 403) {\n                        this.emitter.emit('callLoginShow');\n                    } else if (err.response.status == 401) {\n                        alert('管理員不可參與！')\n                    } else {\n                        console.error(err);\n                    }\n                }))\n            this.sendAddData = false;\n        },\n    },\n    created() {\n        ajax.post('accounts/status', {},\n            (res) => {\n                if (res.data.status == false) {\n                    this.emitter.emit('preLoginWindow', 'proposeList');\n                } else {\n                    if (res.data.isAdmin == true) {\n                        this.status.personAccess = false;\n                    } else {\n                        this.status.personAccess = true;\n                    }\n                }\n            },\n            (err) => {\n                console.error(err)\n            })\n        setInterval(() => {\n            if (!this.sendAddData) {\n                // console.log('a',this.sendAddData);\n                // localStorage.setItem('joinstu_AddPropose_title', this.title);\n                // localStorage.setItem('joinstu_AddPropose_details', this.details);\n                // localStorage.setItem('joinstu_AddPropose_purpose', this.purpose);  \n            }\n        }, 1000)\n    },\n}\n</script>","import { render } from \"./add.vue?vue&type=template&id=5af3ae81\"\nimport script from \"./add.vue?vue&type=script&lang=js\"\nexport * from \"./add.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/joinstu-admin-vue/joinstu-admin-vue/joinstu-index-vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","action","style","type","disabled","role","_hoisted_13","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","name","placeholder","required","$data","title","$event","details","_hoisted_6","_hoisted_7","rows","purpose","_hoisted_8","status","personAccess","_hoisted_9","sendingFourmData","onClick","_cache","$options","sendAddData","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","data","undefined","methods","this","ajax","res","setTimeout","$router","push","reason","alert","console","error","err","response","emitter","emit","created","isAdmin","setInterval","__exports__","render"],"sourceRoot":""}