{"version":3,"file":"js/799.70445d87.js","mappings":"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","sources":["webpack://joinstu-index-vue/./src/views/profile/index.vue","webpack://joinstu-index-vue/./src/views/profile/index.vue?ca4f"],"sourcesContent":["<template>\n    <div style=\"display: flex;margin: 5px;\" v-if=\"status.updating == false\">\n        <div class=\"text-center border rounded-0 shadow-sm profile-box\" style=\"width: 14em;height: 30em;background-color: #ffffff;margin-right: 5px;\">\n            <div v-if=\"profile != undefined && data.school != undefined && data.id != undefined\">\n                <div style=\"height: 50px;background: rgba(54,162,177,0);\"></div>\n                <div>\n                    <i class=\"bi bi-person-circle\" style=\"font-size: 3em;\"></i>\n                </div>\n                <div style=\"height: 80px;\">\n                    <h3 style=\"margin-bottom: 0px;\">{{ profile.name }}</h3>\n                    <p style=\"font-size: 1em;margin-bottom: 16px;\">{{ data.id }}</p>\n                    <p style=\"font-size: 1em;\">{{ data.school }}</p>\n                </div>\n                <div style=\"margin-top: 3em;\">\n                    <p>於<span>{{ new Date(profile.joindate).toLocaleDateString() }}</span>加入</p>\n                    <p>附議了<span style=\"color: var(--bs-blue);font-size: 1.5em;\">{{ profile.supportedProposes.length }}</span>次</p>\n                    <p>發起了<span style=\"color: var(--bs-blue);font-size: 1.5em;\">{{ profile.addedProposes.length }}</span>個提案</p>\n                    <p>發了<span style=\"color: var(--bs-blue);font-size: 1.5em;\">{{ profile.addedForums.length }}</span>篇文</p>\n                </div>\n            </div>\n            <div v-else>\n                <div class=\"spinner-border text-primary\" style=\"height: 2em;margin-left:calc(50vw - 2em);\" role=\"status\"></div>\n            </div>\n        </div>\n        <div style=\"padding: 5px;width: 100%;\">\n            <h2>動態</h2>\n            <div style=\"margin-bottom: 1em;\">\n                <h3>最近附議</h3>\n                <div v-if=\"recent.support.length == 0\">\n                    <div class=\"card\" style=\"display: flex;margin: -4px;margin-bottom: 1em;\">\n                        <div class=\"card-body\">\n                            <h4 class=\"card-title\">\n                                無附議紀錄                            \n                            </h4>\n                        </div>\n                    </div>\n                </div>\n                <div v-else>\n                    <div v-for=\"card in recent.support\" :key=\"card.url\" class=\"card\" style=\"display: flex;margin: -4px;margin-bottom: 1em;\">\n                        <router-link class=\"card-body\" :to=\"{ name: 'proposeDetails', params: { id: card.url } }\">\n                            <h4 class=\"card-title\">\n                                <i class=\"bi bi-phone-landscape\"></i>\n                                附議：<span>{{ card.title }}</span>\n                            </h4>\n                        </router-link>\n                    </div>\n                    <!-- <a href=\"#\">載入更多...</a> -->\n                </div>\n            </div>\n            <div>\n                <h3>最近發起議案</h3>\n                <div v-if=\"recent.support.length == 0\">\n                    <div class=\"card\" style=\"display: flex;margin: -4px;margin-bottom: 1em;\">\n                        <div class=\"card-body\">\n                            <h4 class=\"card-title\">\n                                無發起紀錄                            \n                            </h4>\n                        </div>\n                    </div>\n                </div>\n                <div v-else>\n                    <div v-for=\"card in recent.propose\" :key=\"card.url\" class=\"card\" style=\"display: flex;margin-bottom: 1em;\">\n                        <router-link class=\"card-body\" :to=\"{ name: 'proposeDetails', params: { id: card.url } }\">\n                            <h4 class=\"card-title\">\n                                <i class=\"bi bi-plus-square\"></i>\n                                提案：<span>{{ card.title }}</span>\n                            </h4>\n                        </router-link>\n                    </div>\n                    <!-- <a href=\"#\">載入更多...</a> -->\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { ajax } from '@/lib/util'\nexport default {\n    name: 'profileIndex',\n    data() {\n        return {\n            recent:{\n                support: [],\n                propose:[],\n            },\n            profile: undefined,\n            status:{\n                access: undefined,\n            },\n            data:{\n                id: undefined,\n                school: undefined,\n            }\n        }\n    },\n    methods: {\n        getProfile() {\n            ajax.get('profile/index',{},\n                (res) => {\n                    this.profile = res.data;\n                    this.getFirstTitles();\n                    ajax.post('data/getSchool',{id: this.profile.school},\n                        (res)=>{\n                            this.data.school = res.data.name;\n                            this.status.updating = true;\n                            this.status.updating = false;\n                        },\n                        (err)=>{\n                            console.log(err);\n                        })\n                },\n                (err) => {\n                    console.log(err);\n                })\n            ajax.post('accounts/status',{},\n                (res) => {\n                    if(res.data.isAdmin){\n                        this.data.id = '管理員';\n                        alert('管理員請至後臺!!');\n                        window.location.href = '/'\n                    }else{\n                        this.data.id = '學生';\n                    }\n                    this.status.updating = true;\n                    this.status.updating = false;\n                },\n                (err) => {\n                    console.log(err);\n                })\n        },\n        getFirstTitles() {\n            if(this.profile.supportedProposes.length != 0){\n                ajax.post('data/getTitle/propose',{id: this.profile.supportedProposes[0]},\n                (res) => {\n                    this.recent.support.push({title: res.data.title, url: this.profile.supportedProposes[0]});\n                    this.status.updating = true;\n                    this.status.updating = false;\n                },\n                (err) => {\n                    console.log(err);\n                })\n            }\n            if(this.profile.addedProposes.length != 0){\n                ajax.post('data/getTitle/propose',{id: this.profile.addedProposes[0]},\n                (res) => {\n                    this.recent.propose.push({title: res.data.title, url: this.profile.supportedProposes[0]});\n                    this.status.updating = true;\n                    this.status.updating = false;\n                },\n                (err) => {\n                    console.log(err);\n                })\n            }\n        },\n    },\n    created() {\n        ajax.post('accounts/status', {},\n        (res) => {\n            if(res.data.status == false){\n                this.emitter.emit('preLoginWindow','profileIndex');\n            }else{\n                this.status.access = true;\n                this.getProfile();\n                this.status.updating = true;\n                this.status.updating = false;\n            }\n        },\n        (err) => {\n            console.error(err)\n        })\n    },\n    \n}\n</script>\n\n<style>\n.rounded-circle {\n  /*position: absolute;*/\n  margin-top: -30px;\n  margin-left: auto;\n  margin-right: auto;\n  /*width: 50%;*/\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=3dc186fa\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=3dc186fa&lang=css\"\n\nimport exportComponent from \"/home/runner/work/joinstu-index-vue/joinstu-index-vue/joinstu-index-vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["style","class","_createElementVNode","role","_hoisted_15","_hoisted_22","_hoisted_29","$data","status","updating","_createElementBlock","_hoisted_1","_hoisted_2","undefined","profile","data","school","id","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","name","_hoisted_8","_hoisted_9","_hoisted_10","Date","joindate","toLocaleDateString","_hoisted_11","supportedProposes","length","_hoisted_12","addedProposes","_hoisted_13","addedForums","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","recent","support","_hoisted_21","_hoisted_23","_hoisted_24","_Fragment","_renderList","card","key","url","_createVNode","_component_router_link","to","params","_hoisted_25","_hoisted_26","title","_hoisted_27","_hoisted_28","_hoisted_30","_hoisted_31","propose","_hoisted_32","_hoisted_33","access","methods","getProfile","ajax","res","this","getFirstTitles","err","console","log","isAdmin","alert","window","location","href","push","created","emitter","emit","error","__exports__","render"],"sourceRoot":""}